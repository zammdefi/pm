<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ethPM</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    button, input { font: inherit; }
    :root { --bg: #fff; --fg: #000; }
    [data-theme="dark"] { --bg: #000; --fg: #fff; }

    body {
      font: bold 16px Helvetica, Arial, sans-serif;
      background: var(--bg);
      color: var(--fg);
      min-height: 100vh;
      padding: 20px;
      transition: background 0.2s, color 0.2s;
    }

    .corner {
      position: fixed;
      font-size: 14px;
      text-decoration: underline;
      text-underline-offset: 3px;
      cursor: pointer;
      background: none;
      border: none;
      color: var(--fg);
    }
    .corner:hover { opacity: 0.5; }
    #wallet { top: 20px; right: 20px; text-decoration-color: #0FF; }
    #theme { bottom: 20px; right: 20px; text-decoration-color: #F0F; }

    .logo {
      position: fixed;
      bottom: 20px;
      left: 20px;
      font-size: clamp(40px, 12vw, 64px);
      letter-spacing: -2px;
    }
    .logo span { text-decoration: underline; text-underline-offset: 4px; cursor: pointer; }
    .logo span:hover { opacity: 0.5; }

    .main { max-width: 500px; margin: 80px auto 100px; }

    h1 {
      font-size: clamp(28px, 7vw, 44px);
      text-align: center;
      line-height: 1.15;
      letter-spacing: -1px;
      margin-bottom: 32px;
    }
    h1 u { text-decoration-thickness: 3px; text-underline-offset: 4px; }

    .odds { display: flex; height: 72px; border: 3px solid var(--fg); position: relative; }
    .bar {
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: clamp(22px, 6vw, 30px);
      cursor: pointer;
      transition: opacity 0.2s, width 0.3s;
    }
    .bar:hover { opacity: 0.7; }
    .bar.dim { opacity: 0.2; pointer-events: none; }
    .y { background: var(--fg); color: #0F0; }
    .n { background: var(--bg); color: #F00; border-left: 3px solid var(--fg); }

    .drop {
      position: absolute;
      top: calc(100% + 10px);
      left: 0;
      right: 0;
      border: 3px solid #000;
      padding: 16px;
      display: flex;
      gap: 12px;
      align-items: center;
      transform: translateY(-8px);
      opacity: 0;
      visibility: hidden;
      transition: all 0.2s;
    }
    .drop.open { transform: translateY(0); opacity: 1; visibility: visible; }
    .drop.yes { background: #0F0; }
    .drop.no { background: #F00; }

    .drop input {
      flex: 1;
      min-width: 0;
      border: 3px solid #000;
      padding: 12px;
      font-size: clamp(20px, 5vw, 26px);
      background: rgba(255,255,255,0.25);
      outline: none;
    }
    .drop input::placeholder { color: rgba(0,0,0,0.4); }
    .drop.no input { border-color: #fff; background: rgba(0,0,0,0.15); color: #fff; }
    .drop.no input::placeholder { color: rgba(255,255,255,0.5); }

    .drop .info { font-size: 14px; letter-spacing: 0.5px; white-space: nowrap; }
    .drop.no .info { color: #fff; }

    .drop button {
      padding: 12px 28px;
      font-size: clamp(16px, 4vw, 20px);
      letter-spacing: 1px;
      cursor: pointer;
      border: none;
      background: #000;
      color: #fff;
    }
    .drop button:hover { opacity: 0.7; }
    .drop.no button { background: #fff; color: #000; }

    @media (max-width: 500px) {
      .drop { flex-wrap: wrap; }
      .drop input { flex: 1 1 55%; }
      .drop .info { flex: 1 1 30%; text-align: right; }
      .drop button { flex: 1 1 100%; margin-top: 6px; }
    }
  </style>
</head>
<body>

<button class="corner" id="wallet" onclick="toggleWallet()">connect</button>
<button class="corner" id="theme" onclick="toggleTheme()">dark</button>

<div class="main">
  <h1 id="q"></h1>
  <div class="odds">
    <div class="bar y" id="yBar" onclick="vote('Y')"></div>
    <div class="bar n" id="nBar" onclick="vote('N')"></div>
    <div class="drop" id="drop">
      <input id="amt" inputmode="decimal" placeholder="0.00" oninput="calc()" onkeydown="if(event.key==='Enter')buy()">
      <span class="info">ETH → <b id="out">0.00</b> <b id="side">Y</b></span>
      <button onclick="buy()">BUY</button>
    </div>
  </div>
</div>

<div class="logo"><span id="logo" onclick="next()">hack</span>PM</div>

<script>
const M = [
  { id:'hack', c:'#FF0', q:'WILL <u style="text-decoration-color:#0F0">PAMM</u> GET <u style="text-decoration-color:#F00">DRAINED</u> BY <u style="text-decoration-color:#F50">2027</u>?', y:23 },
  { id:'eth', c:'#627EEA', q:'WILL <u style="text-decoration-color:#627EEA">ETH</u> HIT <u style="text-decoration-color:#0F0">$10K</u> BY <u style="text-decoration-color:#F50">2027</u>?', y:67 },
  { id:'gas', c:'#F50', q:'WILL <u style="text-decoration-color:#F50">GAS</u> RISE ABOVE <u style="text-decoration-color:#0F0">5 GWEI</u> BY <u style="text-decoration-color:#0FF">Q2</u>?', y:41 },
  { id:'pnk', c:'#F69', q:'WILL <u style="text-decoration-color:#F69">PNKSTR</u> HOLD <u style="text-decoration-color:#0F0">&gt;40</u> <u style="text-decoration-color:#0FF">CRYPTOPUNKS</u> BY <u style="text-decoration-color:#F50">EOW</u>?', y:52 },
  { id:'uni', c:'#F07', q:'WILL <u style="text-decoration-color:#F07">FEE SWITCH</u> TURN ON FOR <u style="text-decoration-color:#0FF">V4</u> BY <u style="text-decoration-color:#F50">2027</u>?', y:34 }
];

let i = 1, dir = null, wallet = false;
let dark = localStorage.theme === 'dark' || (!localStorage.theme && matchMedia('(prefers-color-scheme:dark)').matches);

const $ = id => document.getElementById(id);

if (dark) { document.documentElement.dataset.theme = 'dark'; $('theme').textContent = 'light'; }
render();

function render() {
  const m = M[i];
  $('q').innerHTML = m.q;
  $('yBar').textContent = `Y ${m.y}%`;
  $('yBar').style.width = m.y + '%';
  $('nBar').textContent = `N ${100 - m.y}%`;
  $('nBar').style.width = (100 - m.y) + '%';
  $('logo').textContent = m.id;
  $('logo').style.textDecorationColor = m.c;
}

function next() { i = (i + 1) % M.length; close(); render(); }

function vote(d) {
  if (dir === d) return close();
  dir = d;
  $('drop').className = 'drop open ' + (d === 'Y' ? 'yes' : 'no');
  $('side').textContent = d;
  $('yBar').classList.toggle('dim', d !== 'Y');
  $('nBar').classList.toggle('dim', d !== 'N');
  $('amt').focus();
  calc();
}

function close() {
  dir = null;
  $('drop').className = 'drop';
  $('yBar').classList.remove('dim');
  $('nBar').classList.remove('dim');
}

function calc() {
  const v = parseFloat($('amt').value) || 0;
  const odds = dir === 'Y' ? M[i].y : 100 - M[i].y;
  $('out').textContent = (v * 100 / odds).toFixed(2);
}

function buy() {
  if (!wallet) return toggleWallet();
  const a = $('amt').value;
  if (a && parseFloat(a) > 0) {
    alert(`Bought ${dir} with ${a} ETH`);
    $('amt').value = '';
    $('out').textContent = '0.00';
    close();
  }
}

function toggleWallet() {
  wallet = !wallet;
  $('wallet').textContent = wallet ? '0x7a3…f92d' : 'connect';
}

function toggleTheme() {
  dark = !dark;
  document.documentElement.dataset.theme = dark ? 'dark' : '';
  $('theme').textContent = dark ? 'light' : 'dark';
  localStorage.theme = dark ? 'dark' : 'light';
}

document.addEventListener('click', e => { if (!e.target.closest('.odds')) close(); });
</script>
</body>
</html>